{"version":3,"sources":["App.js","serviceWorker.js","index.js"],"names":["style","bar","showBar","background","height","display","justifyContent","flexDirection","alignItems","buttonContainer","button","isActive","color","padding","fontSize","borderRadius","pointer","WebkitUserSelect","MozUserSelect","MsUserSelect","boxShadow","link","textDecoration","control","margin","playPause","width","seek","angle","barShown","position","right","zIndex","textbox","border","outline","instructions","marginTop","duration","String","raw","durationRE","RegExp","vId","videoIdRE","videoWithTimestampRE","anyPlaying","vods","playing","getMilliseconds","durationString","match","parseInt","toTwitchTime","seconds","secondsLeft","hours","Math","floor","minutes","round","urlPath","window","location","pathname","substr","search","App","React","useState","authToken","setAuthToken","useEffect","fetch","process","method","then","resp","json","data","access_token","active","vodState","setVodState","vodsRef","useRef","current","activeVod","ref","handler","newVodText","setNewVodText","smartMute","setSmartMute","smartPlay","setSmartPlay","showTopBar","setShowTopBar","showBottomBar","setShowBottomBar","show","useTimestamp","url","timestamp","shareState","setShareState","error","setError","initialSync","setInitialSync","shareWindow","listener","event","contains","target","document","addEventListener","removeEventListener","shareText","boxSize","windowSize","boxes","ratio","adjustedWindowSize","bestBox","rows","cols","ceil","w","h","findBoxSize","undefined","setWindowSize","handleResize","innerWidth","innerHeight","useWindowSize","length","getVod","vodId","headers","vodData","start","Date","created_at","end","getTime","id","createRef","volume","muted","showButtons","buttonTimeoutRef","message","status","catch","syncVods","time","mustSyncAll","v","user_name","push","offset","seekTo","getTimestamp","getCurrentTime","getLink","base","origin","timestampIndex","i","vod","interval","setInterval","anyActive","newActive","player","getInternalPlayer","getMuted","console","log","clearTimeout","vodIds","split","syncVod","vodPromises","vodIdStr","includes","milliseconds","Promise","all","timeToSync","flexGrow","flexBasis","marginLeft","marginRight","maxHeight","overflow","boxSizing","icon","faTimes","className","onClick","type","value","onChange","e","size","placeholder","paddingLeft","isFirstVod","concat","top","alignSelf","readOnly","faCopy","select","execCommand","checked","href","faAngleUp","faAngleDown","bottom","alignContent","flexWrap","minWidth","marginBottom","map","index","key","onMouseEnter","setTimeout","onMouseMove","visibility","currentSeconds","currentTime","splice","controls","config","twitch","options","autoplay","onPlay","onPause","progressInterval","flex","latestVod","faUndo","faPause","faPlay","anyVodsPlaying","faRedo","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.cfc3136c.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\nimport ReactPlayer from 'react-player/twitch'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlay, faPause, faRedo, faUndo, faAngleUp, faAngleDown, faTimes, faCopy} from '@fortawesome/free-solid-svg-icons'\n\nconst minHeight = 300\nconst defaultVolume = .5\nconst progressInterval = 1000\nconst twitchPurple = \"#9147ff\"\n\nconst style= {\n  bar: showBar => ({\n    background: \"#333333\",\n    height: showBar ? 52 : 0,\n    display: showBar ? \"flex\" : \"none\",\n    justifyContent: \"center\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  }),\n  buttonContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n  },\n  button: isActive => ({\n    background: \"#bdbdbd\",\n    color: \"#2b2b2b\",\n    padding: \"1px 5px\",\n    fontSize: \"13px\",\n    borderRadius: \"2px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    pointer: \"cursor\",\n    WebkitUserSelect: \"none\",\n    MozUserSelect: \"none\",\n    MsUserSelect: \"none\",\n    height: \"26px\",\n    boxShadow: isActive ? `inset 1px 1px 3px ${twitchPurple}, inset -1px -1px 3px ${twitchPurple}` : \"\",\n  }),\n  link: {\n    color: \"#bdbdbd\",\n    textDecoration: \"none\",\n  },\n  control: {\n    margin: \"9px\",\n    color: \"#bdbdbd\",\n    WebkitUserSelect: \"none\",\n    MozUserSelect: \"none\",\n    MsUserSelect: \"none\",\n  },\n  playPause: {\n    width: \"28px\",\n    height: \"28px\",\n  },\n  seek: {\n    width: \"18px\",\n    height: \"18px\",\n  },\n  angle: barShown => ({\n    width: \"20px\",\n    height: \"20px\",\n    margin: \"9px 9px\",\n    WebkitUserSelect: \"none\",\n    MozUserSelect: \"none\",\n    MsUserSelect: \"none\",\n    borderRadius: \"4px\",\n    padding: \"7px\",\n    color: barShown ? \"black\" : \"white\",\n    position: \"absolute\",\n    right: 0,\n    zIndex: 2,\n  }),\n  textbox: {\n    background: \"#cfcfcf\",\n    border: \"none\",\n    outline: \"none\",\n    borderRadius: \"2px\",\n  },\n  instructions: {\n    fontSize: \"15px\",\n    marginTop: \"8px\",\n  }\n}\n\nconst duration = String.raw`(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s)`\nconst durationRE = new RegExp(`${duration}`)\nconst vId = String.raw`\\d\\d\\d\\d\\d\\d\\d\\d\\d`\nconst videoIdRE = new RegExp(`^(${vId})$|.*twitch\\\\.tv\\\\/videos\\\\/(${vId})$`)\nconst videoWithTimestampRE = new RegExp(`(${vId})(?:\\\\?t=(${duration}))?`)\n\n// Ratio is width:height.\nfunction findBoxSize(windowSize, boxes, ratio, showTopBar, showBottomBar) {\n  const adjustedWindowSize = {\n    width: windowSize.width,\n    height: windowSize.height-(style.bar(showTopBar).height+style.bar(showBottomBar).height),\n  }\n  let bestBox = {width: minHeight*ratio, height: minHeight}\n  // let bestBox = {width: 0, height: 0}\n  for (let rows = 1; rows <= boxes; rows++) {\n    let cols = Math.ceil(boxes/rows)\n    if (adjustedWindowSize.height*ratio/rows > adjustedWindowSize.width/cols) {\n      // Width bottlenecked\n      let w = adjustedWindowSize.width/cols\n      if (w > bestBox.width) {\n        bestBox = {width: w, height: w/ratio}\n      }\n    } else {\n      // Height bottlenecked\n      let h = adjustedWindowSize.height/rows\n      if (h > bestBox.height) {\n        bestBox = {width: h*ratio, height: h}\n      }\n    }\n  }\n  return bestBox\n}\n\nfunction anyPlaying(vods) {\n  for (let v of vods) {\n    if (v.playing) {\n      return true\n    }\n  }\n  return false\n}\n\n// Adapted from https://usehooks.com/useWindowSize/\nfunction useWindowSize() {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = React.useState({\n    width: undefined,\n    height: undefined,\n  });\n\n  React.useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }\n\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize);\n\n    // Call handler right away so state gets updated with initial window size\n    handleResize();\n\n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []); // Empty array ensures that effect is only run on mount\n\n  return windowSize;\n}\n\n// Copied from https://usehooks.com/useOnClickOutside/\nfunction useOnClickOutside(ref, handler) {\n  React.useEffect(\n    () => {\n      const listener = event => {\n        // Do nothing if clicking ref's element or descendent elements\n        if (!ref.current || ref.current.contains(event.target)) {\n          return;\n        }\n\n        handler(event);\n      };\n\n      document.addEventListener('mousedown', listener);\n      document.addEventListener('touchstart', listener);\n\n      return () => {\n        document.removeEventListener('mousedown', listener);\n        document.removeEventListener('touchstart', listener);\n      };\n    },\n    // Add ref and handler to effect dependencies\n    // It's worth noting that because passed in handler is a new ...\n    // ... function on every render that will cause this effect ...\n    // ... callback/cleanup to run every render. It's not a big deal ...\n    // ... but to optimize you can wrap handler in useCallback before ...\n    // ... passing it into this hook.\n    [ref, handler]\n  );\n}\n\nfunction getMilliseconds(durationString) {\n  let match = durationString.match(durationRE)\n  const msFromSecs = parseInt(match[3]) * 1000\n  const msFromMins = parseInt(match[2]) * 60 * 1000\n  const msFromHours = parseInt(match[1]) * 60 * 60 * 1000\n  return msFromSecs + msFromMins + msFromHours\n}\n\nfunction toTwitchTime(seconds) {\n  let secondsLeft = seconds\n  const hours = Math.floor(secondsLeft/(60*60))\n  secondsLeft = secondsLeft - hours*60*60\n  const minutes = Math.floor(secondsLeft/60)\n  secondsLeft = Math.round(secondsLeft - minutes*60)\n  return `${hours}h${minutes}m${secondsLeft}s`\n}\n\nconst urlPath = window.location.pathname.substr(1) + window.location.search\n\nfunction App() {\n  const [authToken, setAuthToken] = React.useState(\"\")\n  React.useEffect(() => {\n    fetch(`https://id.twitch.tv/oauth2/token?client_id=${process.env.REACT_APP_TWITCH_CLIENT_ID}&client_secret=${process.env.REACT_APP_TWITCH_SECRET}&grant_type=client_credentials`, {\n      method: 'POST',\n    })\n      .then(resp => resp.json())\n      .then(data => setAuthToken(data.access_token))\n  }, [])\n\n  const [vodState, setVodState] = React.useState({\n    active: -1,\n    vods: [],\n  })\n\n  // These are used when we need to asynchronously remove buttons, which accidentally delete vods\n  // sometimes due to not knowing new vods were added.\n  const vodsRef = React.useRef(vodState.vods)\n  vodsRef.current = vodState.vods\n  const activeVod = React.useRef(vodState.active)\n  activeVod.current = vodState.active\n\n  const [newVodText, setNewVodText] = React.useState(\"\")\n\n  const [smartMute, setSmartMute] = React.useState(true)\n  const [smartPlay, setSmartPlay] = React.useState(true)\n  const [showTopBar, setShowTopBar] = React.useState(true)\n  const [showBottomBar, setShowBottomBar] = React.useState(true)\n  const [shareState, setShareState] = React.useState({\n    show: false,\n    useTimestamp: true,\n    url: \"\",\n    timestamp: \"\",\n  })\n  const [error, setError] = React.useState(\"\")\n  const [initialSync, setInitialSync] = React.useState(null)\n\n  const shareWindow = React.useRef()\n  useOnClickOutside(shareWindow, () => setShareState({...shareState, show: false}))\n  const shareText = React.useRef()\n\n  const windowSize = useWindowSize()\n  const boxSize = findBoxSize(windowSize, vodState.vods.length, 16/9, showTopBar, showBottomBar)\n\n  const getVod = (vodId) => {\n    return fetch(`https://api.twitch.tv/helix/videos?id=${vodId}`, {\n      headers: {\n        \"Authorization\": `Bearer ${authToken}`,\n        \"Client-Id\": process.env.REACT_APP_TWITCH_CLIENT_ID,\n      }\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error === undefined) {\n          // Find starting and ending times for this video.\n          const vodData = data.data[\"0\"]\n          const start = new Date(vodData.created_at)\n          const end = new Date(start.getTime() + getMilliseconds(vodData.duration))\n\n          return {\n            id: vodId,\n            start: start,\n            end: end,\n            ref: React.createRef(),\n            playing: false,\n            volume: defaultVolume,\n            muted: true,\n            showButtons: false,\n            buttonTimeoutRef: React.createRef(),\n            vodData: vodData,\n          }\n        } else {\n          setError(`API Error: ${data.error}, message: ${data.message} (status: ${data.status})`)\n        }\n      }).catch(error => setError(`Error adding video: ${error}`))\n  }\n\n  const syncVods = (time, mustSyncAll) => {\n    let syncVods = []\n    for (let v of vodState.vods) {\n      if (v.end < time || v.start > time) {\n        setError(`Cannot sync ${v.vodData.user_name} (id ${v.id})`)\n        if (mustSyncAll) {\n          return\n        }\n      } else {\n        syncVods.push(v)\n      }\n    }\n    // Sync them.\n    for (let v of syncVods) {\n      let offset = (time - v.start)/1000\n      v.ref.current.seekTo(offset, \"seconds\")\n    }\n  }\n\n  const getTimestamp = () => {\n    if (vodState.active === -1) {\n      return toTwitchTime(vodState.vods[0].ref.current.getCurrentTime())\n    } else {\n      return toTwitchTime(vodState.vods[vodState.active].ref.current.getCurrentTime())\n    }\n  }\n\n  const getLink = (useTimestamp) => {\n    const base = window.location.origin\n    let vods = \"\"\n    let timestampIndex = vodState.active === -1 ? 0 : vodState.active\n    for (let i = 0; i < vodState.vods.length; i++) {\n      const vod = vodState.vods[i]\n      let timestamp = \"\"\n      if (useTimestamp && i === timestampIndex) {\n        timestamp = getTimestamp()\n      }\n      vods = timestamp === \"\" ? `${vods}/${vod.id}` : `${vods}/${vod.id}?t=${timestamp}`\n    }\n    return `${base}${vods}`\n  }\n\n  // In charge of making sure vods maintain a single mute.\n  React.useEffect(() => {\n    // Set interval to watch for change in mutes.\n    const interval = setInterval(() => {\n      try {\n        if (smartMute) {\n          let anyActive = false\n          let newActive = -1\n          for (let i = 0; i < vodState.vods.length; i++) {\n            let player = vodState.vods[i].ref.current.getInternalPlayer()\n            if (player !== undefined) {\n              let muted = player.getMuted()\n              if (!muted) {\n                anyActive = true\n                // If this is a new active vod, remember it.\n                if (i !== vodState.active) {\n                  newActive = i\n                }\n              }\n            }\n          }\n          if (newActive !== -1) {\n            vodState.vods[newActive].muted = false\n            if (vodState.active !== -1) {\n              vodState.vods[vodState.active].muted = true\n            }\n            setVodState({\n              active: newActive,\n              vods: vodState.vods,\n            })\n          } else {\n            setVodState({\n              active: anyActive ? vodState.active : -1,\n              vods: vodState.vods,\n            })\n          }\n        }\n      } catch (error) {\n        setVodState({\n          active: -1,\n          vods: vodsRef.current,\n        })\n        console.log(error)\n      }\n    }, 50)\n    return () => clearTimeout(interval)\n  })\n\n  React.useEffect(() => {\n    if (urlPath && authToken) {\n      // Parse videos out of the urlPath and check that they are valid ID strings. Also, if there\n      // is a timestamp, store it.\n      const vodIds = urlPath.split(\"/\")\n      let syncVod = null\n      const vodPromises = []\n      for (let vodIdStr of vodIds) {\n        // Most likely this is just a trailing slash.\n        if (vodIdStr === \"\") {\n          continue\n        }\n        let match = vodIdStr.match(videoWithTimestampRE)\n        // Make sure this is a valid ID.\n        if (match === null) {\n          setError(`Incorrect ID in url: ${vodIdStr}`)\n          return\n        }\n        let vodId = match[1]\n        // If it has a timestamp, throw an error if it's an inaccurate timestamp or if we already\n        // had a timestamp.\n        if (vodIdStr.includes(\"?t=\")) {\n          if (match[2] === null) {\n            setError(`Invalid timestamp here: ${vodIdStr}`)\n            return\n          } else if (syncVod !== null) {\n            setError(`URL has multiple timestamps: ${vodIdStr}`)\n            return\n          } else {\n            syncVod = {milliseconds: getMilliseconds(match[2]), id: vodId}\n          }\n        }\n        vodPromises.push(getVod(vodId))\n      }\n      // Wait for all vods to finish loading, then set their state.\n      Promise.all(vodPromises).then((vods) => {\n        // If we don't need to sync to a time, then just set state.\n        if (!syncVod) {\n          setVodState({\n            active: -1,\n            vods: vods\n          })\n        } else {\n          // Set vods to playing before running a seek. Also, get the vod that we'll sync to.\n          let timeToSync = new Date(0)\n          for (let vod of vods) {\n            vod.playing = true\n            if (vod.id === syncVod.id) {\n              timeToSync = new Date(vod.start.getTime() + syncVod.milliseconds)\n            }\n          }\n          setInitialSync(timeToSync)\n          setVodState({\n            active: 0,\n            vods: vods\n          })\n        }\n      })\n    }\n  }, [authToken])\n\n  React.useEffect(() => {\n    if (initialSync) {\n      // Make sure refs exist for each vod.\n      for (let vod of vodState.vods) {\n        if (vod.ref.current === null) {\n          return\n        }\n      }\n      syncVods(initialSync, false)\n      setInitialSync(null)\n    }\n  }, [vodState])\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        height: \"100vh\",\n        width: \"100vw\",\n        flexDirection: \"column\",\n        background: \"black\",\n      }}\n    >\n      {/* Header */}\n      <div style={{...style.bar(showTopBar)}}>\n        {/* Left of input */}\n        <div style={{display: \"flex\", flexGrow: 1, flexBasis: 0, alignItems: \"center\"}}>\n          {/* Error message */}\n          <div style={{\n            display: error === \"\" ? \"none\" : \"flex\",\n            alignItems: \"center\",\n            marginLeft: \"10px\",\n            marginRight: \"10px\",\n            padding: \"4px\",\n            fontSize: \"13px\",\n            background: \"#757575\",\n            boxShadow: \"0 0 0 1px #b50000\",\n            borderRadius: \"2px\",\n            maxHeight: `${style.bar(true).height-8}px`,\n            overflow: \"scroll\",\n            boxSizing: \"border-box\",\n          }}>\n            <div>{error}</div>\n            <FontAwesomeIcon icon={faTimes} className=\"closeError\"\n              style={{\n                width: \"13px\",\n                height: \"13px\",\n                padding: \"3px\",\n                marginLeft: \"7px\",\n                borderRadius: \"2px\",\n              }}\n              onClick={() => {setError(\"\")}}\n            />\n          </div>\n        </div>\n        {/* Inputs */}\n        <div style={style.buttonContainer}>\n          <input\n            type=\"text\"\n            value={newVodText}\n            onChange={e => setNewVodText(e.target.value)}\n            size=\"50\"\n            placeholder=\"http://twitch.tv/videos/123456789 or 123456789\"\n            style={{\n              ...style.textbox,\n              paddingLeft: \"5px\",\n              height: style.button(false).height,\n            }}\n          />\n          <div\n            style={{\n              ...style.button(false),\n              marginLeft: \"5px\",\n            }}\n            onClick={() => {\n              const match = newVodText.match(videoIdRE)\n              if (match !== null) {\n                const vodId = match[2] === undefined ? match[1] : match[2]\n                getVod(vodId)\n                .then((vod) => {\n                  const isFirstVod = (vodState.vods.length === 0)\n                  vod.muted = !isFirstVod\n                  setVodState({\n                    active: isFirstVod ? 0 : vodState.active,\n                    vods: vodState.vods.concat(vod)\n                  })\n                })\n              } else {\n                // No match, show error.\n                setError(`Could not parse video from text \"${newVodText}\"`)\n              }\n              setNewVodText(\"\")\n            }}\n          >\n            Add Video\n          </div>\n          {/* Share */}\n          <div ref={shareWindow} style={{display: \"flex\", flexDirection: \"column\", alignItems: \"center\"}}>\n            <div style={{...style.button(false), marginLeft: \"5px\", position: \"relative\"}}\n              onClick={() => {\n                if (vodState.vods.length === 0) {\n                  setError(\"You can't share before adding videos!\")\n                  return\n                }\n                setShareState({...shareState, url: getLink(shareState.useTimestamp), show: !shareState.show, timestamp: getTimestamp()})\n              }}\n            >\n              Share\n            </div>\n            {/* Actual share window */}\n            <div\n              style={{\n                position: \"absolute\",\n                display: shareState.show ? \"flex\" : \"none\",\n                flexDirection: \"column\",\n                top: style.bar(true).height+1,\n                background: \"#757575\",\n                borderRadius: \"3px\",\n                padding: \"4px 3px 3px 10px\",\n                zIndex: 2,\n              }}\n            >\n              <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n                <div style={{fontSize: \"14px\"}}>Share</div>\n                <FontAwesomeIcon icon={faTimes} className=\"shareButton\"\n                  style={{\n                    width: \"18px\",\n                    height: \"18px\",\n                    padding: \"2px\",\n                    borderRadius: \"3px\",\n                  }}\n                  onClick={() => {setShareState({...shareState, show: false})}}\n                />\n              </div>\n              <div style={{display: \"flex\", alignSelf: \"center\", alignItems: \"center\", margin: \"10px 0px\"}}>\n                <input\n                  ref={shareText}\n                  type=\"text\"\n                  size={shareState.url.length > 50 ? shareState.url.length : 50}\n                  style={{\n                    ...style.textbox,\n                    padding: \"5px 2px\",\n                  }}\n                  value={shareState.url}\n                  readOnly={true}\n                />\n                {/* </div> */}\n                <FontAwesomeIcon icon={faCopy} className=\"shareButton\"\n                  style={{\n                    width: \"18px\",\n                    height: \"18px\",\n                    marginLeft: \"6px\",\n                    marginRight: \"-2px\",\n                    padding: \"6px\",\n                    borderRadius: \"50%\",\n                  }}\n                  onClick={() => {\n                    shareText.current.select()\n                    document.execCommand('copy')\n                  }}\n                />\n              </div>\n              <div style={{display: \"flex\", alignSelf: \"center\"}}>\n                <input\n                  type=\"checkbox\"\n                  checked={shareState.useTimestamp}\n                  onChange={(e) => {\n                    setShareState({\n                      ...shareState,\n                      useTimestamp: e.target.checked,\n                      url: getLink(e.target.checked),\n                      timestamp: getTimestamp(),\n                    })\n                  }}\n                />\n                <div\n                  style={{\n                    fontSize: \"14px\"\n                  }}\n                >\n                  Start at {shareState.timestamp}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        {/* Right of input */}\n        <div\n          style={{\n            flexGrow: 1,\n            flexBasis: 0,\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n            alignItems: \"center\",\n          }}>\n          <a href=\"https://github.com/henryperson/twitchsync\" style={{...style.link, marginRight: \"20px\", fontSize: \"14px\"}}>Source</a>\n          <a href=\"https://www.buymeacoffee.com/henryperson\" style={{...style.link, marginRight: \"60px\", fontSize: \"14px\"}}>Buy Me Coffee</a>\n        </div>\n      </div>\n      {/* Hide/show top/bottom bar icons */}\n      <FontAwesomeIcon\n        className=\"showhide\"\n        style={{...style.angle(showTopBar), top: 0}}\n        icon={showTopBar ? faAngleUp : faAngleDown}\n        onClick={() => setShowTopBar(!showTopBar)}\n      />\n      <FontAwesomeIcon\n        className=\"showhide\"\n        style={{...style.angle(showBottomBar), bottom: 0}}\n        icon={showBottomBar ? faAngleDown: faAngleUp}\n        onClick={() => setShowBottomBar(!showBottomBar)}\n      />\n      {/* Main body */}\n      <div\n        style={{\n          flexGrow: 1,\n          display: \"flex\",\n          flexDirection: \"row\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          alignContent: \"center\",\n          flexBasis: 0,\n          flexWrap: \"wrap\",\n          minWidth: \"0%\",\n        }}\n      >\n        {vodState.vods.length === 0 &&\n          <div\n            style={{\n              color: style.link.color,\n              boxShadow: `0 0 0 1px ${style.link.color}`,\n              borderRadius: \"2px\",\n              padding: \"15px\",\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"flex-start\",\n              width: \"580px\",\n            }}\n          >\n            <div style={{\n              alignSelf: \"center\",\n              marginBottom: \"15px\",\n              fontSize: style.instructions.fontSize+2\n            }}>Instructions</div>\n            <div style={style.instructions}>1. Copy the links or ids of the VODs you want to watch\n            (one at a time) into the text box at the top and click \"Add Video\".</div>\n            <div style={style.instructions}>2. Find a point in a video where you want to watch, and\n            use that video's \"Sync To This\" button to watch all videos at that real time. You can\n            also use \"Earliest Sync\" to sync all videos to the earliest time where they were all live.</div>\n            <div style={style.instructions}>3. Click \"Share\" to get a link to the set of videos you\n            are watching and (optionally) a timestamp to sync them all to. The timestamp is whichever\n            video is unmuted at the time, and if they're all muted it defaults to the first video.</div>\n\n            <div style={style.instructions}>Other controls:</div>\n            <div style={style.instructions}>\n              <ul style={{paddingLeft: \"20px\", margin: \"6px 0px\"}}>\n                <li>Smart mute forces at most one video to be unmuted</li>\n                <li>Smart play forces all videos to pause/play together. You can use it to\n                get a bit more fine grained control over video sync, as it's not perfect.</li>\n                <li>Controls at the bottom apply to all videos. The skips go forward/back by 10 seconds.</li>\n                <li>The arrows on the top/bottom bars will show/hide those bars, if you want the extra space.</li>\n              </ul>\n            </div>\n            <div style={style.instructions}>Sorry if it's not perfect, I am limited in annoying\n            ways by the Twitch API. If you notice a bug, feel free to report it <a href=\"https://github.com/henryperson/twitchsync/issues\">here</a>.</div>\n            <div style={style.instructions}>Hope you enjoy!</div>\n          </div>\n        }\n        {vodState.vods.map((vod, index) => {\n          return (\n            <div\n              key={index}\n              style={{\n                width: boxSize.width,\n                height: boxSize.height,\n                boxSizing: \"border-box\",\n                padding: \"2px\",\n                position: \"relative\",\n              }}\n              onMouseEnter={() => {\n                vod.showButtons = true\n                setVodState({\n                  active: vodState.active,\n                  vods: vodState.vods,\n                })\n                if (vod.buttonTimeoutRef !== null) {\n                  clearTimeout(vod.buttonTimeoutRef.current)\n                }\n                vod.buttonTimeoutRef.current = setTimeout(() => {\n                  vod.showButtons = false\n                  setVodState({\n                    active: activeVod.current,\n                    vods: vodsRef.current,\n                  })\n                }, 2000)\n              }}\n            >\n              {/* Buttons for closing */}\n              <div\n                style={{\n                  position: \"absolute\",\n                  top: 0,\n                  right: 0,\n                  display: \"flex\",\n                  margin: \"12px\",\n                }}\n                // TODO: maybe don't repeat this code if it can be made a function without the\n                // rendering no longer working?\n                onMouseMove={() => {\n                  vod.showButtons = true\n                  setVodState({\n                    active: vodState.active,\n                    vods: vodState.vods,\n                  })\n                  if (vod.buttonTimeoutRef !== null) {\n                    clearTimeout(vod.buttonTimeoutRef.current)\n                  }\n                  vod.buttonTimeoutRef.current = setTimeout(() => {\n                    vod.showButtons = false\n                    setVodState({\n                      active: activeVod.current,\n                      vods: vodsRef.current,\n                    })\n                  }, 2000)\n                }}\n              >\n                {/* Sync button */}\n                <div\n                  style={{\n                    ...style.button(false),\n                    marginRight: \"10px\",\n                    visibility: vod.showButtons ? \"visible\" : \"hidden\",\n                  }}\n                  onClick={() => {\n                    // Check if the videos are syncable.\n                    const currentSeconds = vod.ref.current.getCurrentTime()\n                    const currentTime = new Date(vod.start.getTime() + currentSeconds*1000)\n                    syncVods(currentTime, false)\n                  }}\n                >\n                  Sync To This\n                </div>\n                {/* Close button */}\n                <FontAwesomeIcon icon={faTimes}\n                  style={{\n                    ...style.button(false),\n                    width: \"16px\",\n                    height: \"16px\",\n                    padding: \"6px\",\n                    visibility: vod.showButtons ? \"visible\" : \"hidden\",\n                  }}\n                  onClick={() => {\n                    if (vod.buttonTimeoutRef !== null) {\n                      clearTimeout(vod.buttonTimeoutRef.current)\n                    }\n                    vodState.vods.splice(index, 1)\n                    setVodState({\n                      active: vodState.active === index ? -1 : vodState.active,\n                      vods: vodState.vods,\n                    })\n                  }}\n                />\n              </div>\n              {/* Player itself */}\n              <ReactPlayer\n                ref={vod.ref}\n                url={\"https://www.twitch.tv/videos/\" + vod.id}\n                width=\"100%\"\n                height=\"100%\"\n                controls={true}\n                config={{\n                  twitch: {\n                    options: {\n                      time: \"0h0m0s\",\n                      autoplay: false,\n                    },\n                  },\n                }}\n                volume={vod.volume}\n                muted={vod.muted}\n                playing={vod.playing}\n                onPlay={() => {\n                  if (smartPlay) {\n                    for (let v of vodState.vods) {\n                      v.playing = true\n                    }\n                  }\n                  vod.playing = true\n                  setVodState({\n                    active: vodState.active,\n                    vods: vodState.vods,\n                  })\n                }}\n                onPause={() => {\n                  if (smartPlay) {\n                    for (let v of vodState.vods) {\n                      v.playing = false\n                    }\n                  }\n                  vod.playing = false\n                  setVodState({\n                    active: vodState.active,\n                    vods: vodState.vods,\n                  })\n                }}\n                progressInterval={progressInterval}\n              />\n            </div>\n          )\n        })}\n      </div>\n      {/* Footer */}\n      <div\n        style={{\n          ...style.bar(showBottomBar),\n        }}\n      >\n        <div style={{...style.buttonContainer, flex: \"1 0 0\", justifyContent: \"flex-start\"}}>\n        <div style={{...style.button(false), margin: \"10px\"}}\n            onClick={() => {\n              if (vodState.vods.length > 0) {\n                // Find the latest vod.\n                let latestVod = vodState.vods[0]\n                for (let vod of vodState.vods) {\n                  if (vod.start > latestVod.start) {\n                    latestVod = vod\n                  }\n                }\n                syncVods(latestVod.start, true)\n              }\n            }}\n          >\n            Earliest Sync\n          </div>\n          <div style={{...style.button(smartMute), margin: \"10px\", width: \"95px\"}}\n            onClick={() => setSmartMute(!smartMute)}\n          >\n            Smart Mute {smartMute ? \"On\" : \"Off\"}\n          </div>\n          <div style={{...style.button(smartPlay), margin: \"10px\", width: \"95px\"}}\n            onClick={() => setSmartPlay(!smartPlay)}\n          >\n            Smart Play {smartPlay ? \"On\" : \"Off\"}\n          </div>\n        </div>\n        {/* Central controls */}\n        <div style={style.buttonContainer}>\n          {/* Back 10 seconds */}\n          <FontAwesomeIcon style={{...style.control, ...style.seek}} icon={faUndo}\n            onClick={() => {\n              setSmartPlay(true)\n              for (let v of vodState.vods) {\n                v.playing = true\n              }\n              setVodState({\n                active: vodState.active,\n                vods: vodState.vods,\n              })\n              for (let v of vodState.vods) {\n                let currentTime = v.ref.current.getCurrentTime()\n                v.ref.current.seekTo(currentTime - 10)\n              }\n            }}\n          />\n          {/* Play/pause */}\n          <FontAwesomeIcon style={{...style.control, ...style.playPause}}\n            icon={anyPlaying(vodState.vods) ? faPause : faPlay}\n            onClick={() => {\n              setSmartPlay(true)\n              let anyVodsPlaying = anyPlaying(vodState.vods)\n              for (let v of vodState.vods) {\n                v.playing = !anyVodsPlaying\n              }\n              setVodState({\n                active: vodState.active === -1 ? 0 : vodState.active,\n                vods: vodState.vods,\n              })\n            }}\n          />\n          {/* Forward 10 seconds */}\n          <FontAwesomeIcon style={{...style.control, ...style.seek}} icon={faRedo}\n            onClick={() => {\n              setSmartPlay(true)\n              for (let v of vodState.vods) {\n                v.playing = true\n              }\n              setVodState({\n                active: vodState.active,\n                vods: vodState.vods,\n              })\n              for (let v of vodState.vods) {\n                let currentTime = v.ref.current.getCurrentTime()\n                v.ref.current.seekTo(currentTime + 10)\n              }\n            }}\n          />\n        </div>\n        <div style={{...style.buttonContainer, flex: \"1 0 0\", justifyContent: \"flex-end\"}}>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}